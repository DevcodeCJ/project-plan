(this["webpackJsonpproject-app"]=this["webpackJsonpproject-app"]||[]).push([[0],{216:function(e,t,c){},404:function(e,t,c){"use strict";c.r(t);var a=c(4),n=c(2),r=c(91),i=c.n(r),s=(c(216),c(11)),l=c(8),o=c(12),j=c(28),d="CREATE_PROJECT",u="CREATE_PROJECT_ERROR",b="LOGIN_SUCCESS",h="LOGIN_ERROR",p="SIGNOUT_SUCCESS",O="SIGNUP_SUCCESS",m="SIGNUP_ERROR",f="CREATE_INITIAL_SUCCESS",x="CREATE_INITIAL_ERROR",g=function(e){return{type:m,payload:e}},N=function(e){return function(t,c,n){n.getFirebase;var r=(0,n.getFirestore)(),i=c().profile,s=c().firebase.auth.uid;r.collection("projects").add(Object(a.a)(Object(a.a)({},e),{},{authorFirstName:i.firstName,authorLastName:i.lastName,authorId:s,createdAt:(new Date).toString()})).then((function(){t(function(e){return{type:d,payload:e}}(e))})).catch((function(e){t({type:u,payload:e})}))}},v=function(e){return function(t,c,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:b})})).catch((function(e){t(function(e){return{type:h,payload:e}}(e.message))}))}},y=function(){return function(e,t,c){(0,c.getFirebase)().auth().signOut().then((function(){return e({type:p})}))}},E=function(e){return function(t,c,a){var n=a.getFirebase,r=a.getFirestore,i=n(),s=r();try{i.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){s.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})})).then(t({type:O})).catch((function(e){return t(g(e.message))}))}catch(l){t(g(l.message))}}},I=function(e,t){return function(c){try{var a=e&&e.filter((function(e){return e.id===t.uid}));c({type:f,payload:a})}catch(n){c(function(e){return{type:x,payload:e}}(n.message))}}},w=c(1);var S=Object(o.b)((function(e){return{initials:e.profile.initials}}),(function(e){return{signOut:function(){return e(y())},createInitials:function(t,c){e(I(t,c))}}}))((function(e){var t=e.initials;return Object(w.jsxs)("ul",{className:"right",children:[Object(w.jsx)("li",{children:Object(w.jsx)(s.c,{to:"/create",className:"nav-links",children:"New Project"})}),Object(w.jsx)("li",{children:Object(w.jsx)("a",{onClick:e.signOut,className:"nav-links",children:"Log Out"})}),Object(w.jsx)("li",{children:Object(w.jsx)(s.c,{to:"/",className:"nav-links btn btn-floating lighten-1 navlink-btn",children:t})})]})}));var C=function(){return Object(w.jsxs)("ul",{className:"right",children:[Object(w.jsx)("li",{children:Object(w.jsx)(s.c,{to:"/signup",children:"Sign Up"})}),Object(w.jsx)("li",{children:Object(w.jsx)(s.c,{to:"/signin",children:"Log In"})})]})};var F=Object(o.b)((function(e){return{auth:e.firebase.auth,users:e.firestore.ordered.users}}),(function(e){return{createInitials:function(t,c){e(I(t,c))}}}))((function(e){var t=e.auth,c=e.users;e.createInitials(c,t);var a=t.uid&&c?Object(w.jsx)(S,{}):Object(w.jsx)(C,{});return Object(w.jsxs)("nav",{className:"nav-wrapper grey darken-3",children:[Object(w.jsx)("div",{className:"nav-container",children:Object(w.jsx)(s.b,{to:"/",className:"brand-logo left",children:"ProjectPlan"})}),a]})})),R=c(52),_=c.n(R);var P=function(e){var t=e.notifications;return Object(w.jsx)("div",{className:"section",children:Object(w.jsx)("div",{className:"card z-depth-0 grey notification-card",children:Object(w.jsxs)("div",{className:"card-content",children:[Object(w.jsx)("span",{className:"card-title white-text",children:Object(w.jsx)("strong",{children:"Notifications"})}),Object(w.jsx)("ul",{className:"notifications white-text",children:t&&t.map((function(e){return Object(w.jsxs)("li",{children:[Object(w.jsxs)("span",{className:"note-user",children:[e.user," "]}),Object(w.jsx)("span",{children:e.content}),Object(w.jsx)("div",{className:"note-date",children:_()(e.time.toDate()).fromNow()})]},e.id)}))})]})})})};var L=function(e){var t=e.project;return Object(w.jsx)("div",{className:"card z-depth-0 project-summary grey",children:Object(w.jsxs)("div",{className:"card-content white-text text-darken-3",children:[Object(w.jsx)("span",{className:"card-title",children:Object(w.jsx)("strong",{children:t.title})}),Object(w.jsxs)("p",{children:["Posted by ",t.authorFirstName," ",t.authorLastName]}),Object(w.jsx)("p",{className:"white-text",children:_()(t.createdAt).calendar()})]})})};var k=function(e){var t=e.projects;return Object(w.jsx)("div",{className:"project-list section",children:t&&t.map((function(e){return Object(w.jsx)(s.b,{to:"/project/"+e.id,children:Object(w.jsx)(L,{project:e})},e.id)}))})},A=c(22);var U=Object(A.d)(Object(o.b)((function(e){return{projects:e.firestore.ordered.projects,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications}})),Object(j.firestoreConnect)([{collection:"projects",limit:6,orderBy:["createdAt","desc"]},{collection:"users"},{collection:"notifications",limit:6,orderBy:["time","desc"]}]))((function(e){var t=e.projects,c=e.auth,a=e.notifications;return c.uid?Object(w.jsx)("div",{className:"dashboard container",children:Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("div",{className:"col s12 m6",children:Object(w.jsx)(k,{projects:t})}),Object(w.jsx)("div",{className:"col s12 m5 offset-m1",children:Object(w.jsx)(P,{notifications:a})})]})}):Object(w.jsx)(l.a,{to:"/signIn"})}));var T=Object(A.d)(Object(o.b)((function(e,t){var c=t.match.params.id,a=e.firestore.data.projects;return{project:a?a[c]:null,auth:e.firebase.auth}})),Object(j.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.project;return e.auth.uid?t?Object(w.jsx)("div",{className:"container section project-details",children:Object(w.jsxs)("div",{className:"card z-depth-0",children:[Object(w.jsxs)("div",{className:"card-content",children:[Object(w.jsx)("span",{className:"card-title",children:t.title}),Object(w.jsx)("p",{children:t.content})]}),Object(w.jsxs)("div",{className:"card-action grey grey-text lighten-4",children:[Object(w.jsxs)("p",{children:["Posted by ",t.authorFirstName," ",t.authorLastName]}),Object(w.jsx)("p",{children:_()(t.createdAt).calendar()})]})]})}):Object(w.jsx)("div",{className:"container center",children:Object(w.jsx)("p",{children:"Loading content..."})}):Object(w.jsx)(l.a,{to:"/signIn"})})),z=c(32),D=c(53);var q=Object(o.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){e(v(t))},createInitials:function(t,c){e(I(t,c))}}}))((function(e){var t=Object(n.useState)({}),c=Object(D.a)(t,2),r=c[0],i=c[1],s=e.authError,o=function(e){i(Object(a.a)(Object(a.a)({},r),{},Object(z.a)({},e.target.id,e.target.value)))};return e.auth.uid?Object(w.jsx)(l.a,{to:"/"}):Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.signIn(r)},className:"white",children:[Object(w.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",id:"email",onChange:o,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{type:"password",id:"password",onChange:o,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Login"}),Object(w.jsx)("div",{className:"red-text center",children:s?Object(w.jsx)("p",{children:s}):null})]})]})})}));var B=Object(o.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(E(t))}}}))((function(e){var t=Object(n.useState)({}),c=Object(D.a)(t,2),r=c[0],i=c[1],s=e.auth,o=e.authError,j=function(e){i(Object(a.a)(Object(a.a)({},r),{},Object(z.a)({},e.target.id,e.target.value)))};return s.uid?Object(w.jsx)(l.a,{to:"/"}):Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r&&e.signUp(r)},className:"white",children:[Object(w.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{type:"email",id:"email",onChange:j,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{type:"password",id:"password",onChange:j,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(w.jsx)("input",{type:"text",id:"firstName",onChange:j,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(w.jsx)("input",{type:"text",id:"lastName",onChange:j,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Sign Up"}),Object(w.jsx)("div",{className:"red-text center",children:o?Object(w.jsx)("p",{children:o}):null})]})]})})}));var G=Object(o.b)((function(e){return console.log(e),{auth:e.firebase.auth}}),(function(e){return{createProject:function(t){e(N(t))}}}))((function(e){var t=Object(n.useState)({}),c=Object(D.a)(t,2),r=c[0],i=c[1],s=function(e){i(Object(a.a)(Object(a.a)({},r),{},Object(z.a)({},e.target.id,e.target.value)))};return e.auth.uid?Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.createProject(r),e.history.push("./")},className:"white",children:[Object(w.jsx)("h5",{className:"grey-text text-darken-3",children:"Create new project"}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"title",children:"Title"}),Object(w.jsx)("input",{type:"text",id:"title",onChange:s,required:!0})]}),Object(w.jsxs)("div",{className:"input-field",children:[Object(w.jsx)("label",{htmlFor:"content",children:"Content"}),Object(w.jsx)("textarea",{id:"content",className:"materialize-textarea",onChange:s,required:!0})]}),Object(w.jsx)("div",{className:"input-field",children:Object(w.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})}):Object(w.jsx)(l.a,{to:"/signIn"})}));var J=function(){return Object(w.jsx)(s.a,{children:Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(F,{}),Object(w.jsxs)(l.d,{children:[Object(w.jsx)(l.b,{exact:!0,path:"/",component:U}),Object(w.jsx)(l.b,{path:"/project/:id",component:T}),Object(w.jsx)(l.b,{path:"/signin",component:q}),Object(w.jsx)(l.b,{path:"/signup",component:B}),Object(w.jsx)(l.b,{path:"/create",component:G})]})]})})},W=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,406)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),r(e),i(e)}))},X={},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return console.log("Login failed"),Object(a.a)(Object(a.a)({},e),{},{authError:t.payload});case b:return console.log("Login successful"),Object(a.a)(Object(a.a)({},e),{},{authError:null});case p:return console.log("Logout successful"),e;case O:return console.log("Signup successful"),Object(a.a)(Object(a.a)({},e),{},{authError:null});case m:return console.log("Signup failed. ",t.payload),Object(a.a)(Object(a.a)({},e),{},{authError:t.payload});default:return e}},H={projects:[{id:1,title:"help me find peach",content:"blah blah blah"},{id:2,title:"get all the stars",content:"blah blah blah"},{id:3,title:"egg hunt with yoshi",content:"blah blah blah"}]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return console.log("created project",t.payload),e;case u:return console.log("created error",t.payload),e;default:return e}},M={},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return console.log("Initials created"),Object(a.a)(Object(a.a)({},e),{},{initials:t.payload[0].initials,firstName:t.payload[0].firstName,lastName:t.payload[0].lastName});case x:return console.log("Initials failed.",t.payload),Object(a.a)(Object(a.a)({},e),{},{initials:"",firstName:"",lastName:""});default:return e}},V=c(54),Y=Object(A.c)({auth:Z,project:K,firestore:V.firestoreReducer,firebase:j.firebaseReducer,profile:Q}),$=c(211),ee=c(40),te=(c(405),c(402),{apiKey:"AIzaSyBSUa_gryppe1c0UB17wumhZvhrm3pH4IQ",authDomain:"project-app-db898.firebaseapp.com",projectId:"project-app-db898",storageBucket:"project-app-db898.appspot.com",messagingSenderId:"150711403124",appId:"1:150711403124:web:0a756a72dd4baed91dc721",measurementId:"G-ZRBYTN898R"});ee.a.initializeApp(te),ee.a.firestore().settings({timestampsInSnapshots:!0});var ce=ee.a,ae=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d)(Object(A.a)($.a.withExtraArgument({getFirestore:V.getFirestore,getFirebase:j.getFirebase})),Object(V.reduxFirestore)(ee.a,ce)),ne=Object(A.e)(Y,ae),re={firebase:ee.a,config:ce,dispatch:ne.dispatch,createFirestoreInstance:V.createFirestoreInstance};i.a.render(Object(w.jsx)(o.a,{store:ne,children:Object(w.jsx)(j.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},re),{},{children:Object(w.jsx)(J,{})}))}),document.getElementById("root")),W()}},[[404,1,2]]]);
//# sourceMappingURL=main.88568010.chunk.js.map